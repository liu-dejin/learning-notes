<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            padding: 0;
            margin: 0;
        }

        table {
            width: 500px;
            border: 1px solid #ccc;
            border-collapse: collapse;
            margin: 100px auto;
        }

        th,
        td {
            width: 80px;
            height: 40px;
            border: 1px solid #ccc;
            text-align: center;
        }
    </style>
</head>

<body>

<table>
    <thead>
    <tr>
        <th><input type="checkbox" class="checkAll">全选</th>
        <th>商品</th>
        <th>商家</th>
        <th>价格</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td><input type="checkbox" class="check"></td>
        <td>魅族20</td>
        <td>魅族</td>
        <td>2999</td>
    </tr>
    <tr>
        <td><input type="checkbox" class="check"></td>
        <td>魅族20pro</td>
        <td>魅族</td>
        <td>4399</td>
    </tr>
    <tr>
        <td><input type="checkbox" class="check"></td>
        <td>魅族20 infinity</td>
        <td>魅族</td>
        <td>7399</td>
    </tr>
    <tr>
        <td><input type="checkbox" class="check"></td>
        <td>魅族18</td>
        <td>魅族</td>
        <td>2999</td>
    </tr>
    </tbody>
</table>

<script>
    // 1. 点击全选复选框，下面的小复选框全都选中
    const checkAll = document.querySelector('.checkAll')
    const checks = document.querySelectorAll('.check')
    checkAll.addEventListener('click', function () {
        // console.log(this.checked);
        checks.forEach(ele => ele.checked = this.checked)
    })

    // 2. 只要小复选框全部选中，全选复选框自动选中，有一个小复选框没有选中，全选复选框就不会选中
    // 每次点击小复选框，利用every遍历所有小复选框，把返回值作为状态给全选按钮
    // 注意要转换为真数组才能使用every方法

    // for (let i = 0; i < checks.length; i++) {
    //     checks[i].addEventListener('click', function () {
    //         console.log(Array.from(checks).every(ele => ele.checked === true));
    //         checkAll.checked = Array.from(checks).every(ele => ele.checked === true)
    //     })
    // }
    checks.forEach(ele => {
        ele.addEventListener('change', function () {
            checkAll.checked = Array.from(checks).every(ele => ele.checked === true)
        })
    })
</script>
</body>

</html>
